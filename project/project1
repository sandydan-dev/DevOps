# DevOps CI-CD Pipeline project

> prerequisites

- download git
- install git 

- download java
- install java 
- config java

- download tomcat 
- install tomcat

- restart pc after setup

- download jenkins
- install jenkins

- download ant
- configure ant

- restart pc after setup 


======================================================

Plugins need to install in jenkins
- Github
- Ant
- JUnit
- Deploy
- Pipeline 



==========================================

# windows project # 

# install git 
- see version in cmd prompt 
cmd: git --version

# add uername and email
cmd: git config --global user.name "sandeep"
cmd: git config --global user.email "sandydan.dev@gmail.com"

# see username and email inside github
cmd: git config --list

# install Java jdk in windows
> go to "oracle java" main site

> see windows section  with this link download the java sdk
> x64 installer:   https://download.oracle.com/java/21/latest/jdk-21_windows-x64_bin.exe

# after installing type cmd to check version java (cmd prompt)
cmd: java --version

# Set environment for Java 
- this path set to system variable to access java anywhere in system
> C:\Program Files\Java\jdk-21

> User variable :
- New > 
- variable name: JAVA_HOME
- variable value: C:\Program Files\Java\jdk-21
- ok


> System Variable (env)
- New > 
- variable name: JAVA_HOME
- variable value: C:\Program Files\Java\jdk-21
- ok

# For java /bin directory 
> path: C:\Program Files\Java\jdk-21\bin
- under "user/system Variable" > Path > Edit > New > Paste(java/bin) "C:\Program Files\Java\jdk-21\bin"
# BOTH ADD 

=================

# Tomcat 
> That end product, you can run only inside tomcat server, because tomcat create environment, so tomcat 
  will understand ".war" file, cause laptop will not uderstand ".war" file, thats why we install tomcat
  and create environment for ".war" file. 

# Tomcat is web application software, which will run web applications/apps, it means (.war files). 

> Downlaod tomcat 
see : under Binary Distributions 
> link:  "Windows Service Istaller (pgp, sha512) : download this 

     laptop > tomcat > .war 

     +----------------+      +----------------------+      +---------------------+
|   LAPTOP / IDE | ---->|      TOMCAT          | ---->|   .war in webapps   |
| (build .war)   |      |  (server & runtime)  |      |  /var/lib/tomcatX/  |
|  mvn package   |      |  catalina, connectors|      |     webapps/my.war  |
+----------------+      +----------------------+      +---------------------+
         |                       |                               ^
         |  scp/copy/deploy      |  browse http://localhost:8080 |
         +--------------------------------------------->---------+



# After downloading tomcat, install now
> while installing it gives many options 
- see "Configuration" section 
- Port : 8080
- username : admin
- password : admin

> finished.

# after this "See Tomcat symbol in PC", see tomcat properties
- staruptype: Automatic
- art service
- apply + ok

> after all of this stuff see tomcat on browser
- http://localhost:8080/  (paste on browser)
- or get you system IPV4 Adress and paste into browser
- http://10.219.121.128:8080  (tomcat will open)

- when it open tomcat go to "Manager App" button
- after this add "user" and "password" to enter in tomcat env

# when ever we create .war file it store in this path
> C:\Program Files\Apache Software Foundation\Tomcat 11.0\webapps


# After all of this setup up | "Restart PC"

=============================================================================

# Download and install Jenkins
> jenkins download
- for windows  :  https://www.jenkins.io/download/thank-you-downloading-windows-installer-stable

> jenkins installing process
> add user and password then
- change the jenkis port to : 8081 
- because our tomcat already running port on : 8080 
- it may not conflict, if both port same it will conflict.

> Now see Jenkins on Brower 
> localhost:8081
- add "initialPassword" and then paste
- then add user and passwd to enter inside jenkins


# Now install Apache Ant 
> go to this website :  https://ant.apache.org/
> Download > Binary Distribution > (choose .zip file) 
( https://downloads.apache.org/ant/binaries/apache-ant-1.10.15-bin.zip.asc )


# Ant = A built tool for java project (similar to maven/gradle but older and simpler)
> Ant as a "Automation Script for Java Builds"

# Why do we use Ant CI-CD purpose
> : when you create a java application 
- compile java code
- create ".class" files
- Build a ".war" or ".jar" files 
- Run tests
- clean previous builds

- Ant automates this all steps using file called "myproject.war" or "facebook.war"

# process of build and create war file
Developer → GitHub → Jenkins → Ant build → WAR file → Tomcat deploy → RUN


# Then extract "Ant" inside the "C:// drive"
> copy its /bin path to environment variable
- 1 path: C:\apache-ant-1.10.15
- 2 path: C:\apache-ant-1.10.15\bin

# set to "user varibale" > new 
> 1st
- variable name: ANT_HOME
- variable value: C:\apache-ant-1.10.15

> 2nd
- user varibale : edit > new + path (C:\apache-ant-1.10.15\bin) paste

# run cmd on cmd promt
cmd: ant -version    # for checking ant version

cmd: ech %ANT_HOME%    # For checking environment variable 

# after all this configuraton 
> Restart laptop 

=======================================================

# In the Jenkins install plugins
1: Github 
2: Ant                            (Adds Apache Ant supports to Jenkins)
3: JUnit Realtime Test Reporter   (publishes test resutls while tests run) (to puhlish test results)
4: Deploy to container            (Artifact Uploads), (tomcat container), (create end product)
5: Build Pipeline                 (user interface, build tools, ohter post build actions )
6: Delivery Pipeline              (user interface, This plugin visualize Delivery Pipelines (Jobs with upstream/downstream dependencies))


# After installing all packages create Jobs for CI-CD
> first clone the Repo inside the C:// drive
cmd: git clone https://github.com/sandydan-dev/SampleWebApp.git 

> go inside the repose
cd: cd SampleWebApp

# Now go inside the jenkins create JOBS
> First Job   : Github (pulling)
> Second Job  : Ant    (Building & checking quality)
> Third Job   : JUnit  (Tesing)
> Forth Job   : Deploy ( Deploying )   to  Tomcat (end-product (.war file))

# 1: first job only purpose to pull the git repo
> First Job > FreeStyle > ok
  - SCM > Git > git url : (https://github.com/sandydan-dev/SampleWebApp.git)
  - > banch : /master
  - apply + save

# 2: second job purpose, to build and check the quality, means creating end-product, and it have checking quality
#    as well  
> Second Job > (copy from : First Job) > ok
  - under,  Build Steps : Add build steps > Invoke Ant
  - Target : checkstyle
  - Aply + save

# 3: third job puporse, for testing purpose, if any error are there in code or not, means checking the code quality.
> Third Job > copy from (Second Job) > ok
  - build steps > Targets : junit
  > Post Build Actions > add post build action : Publish JUnit test result report
  - Test report XML's : test_calculator_junit_result.xml  (give any name <anyname>.xml)
  - apply + save

# 4: forth job purpose, we need to tomcat doors open to deployed end project (.war file inside the tomcat)
# firs keep doors open
> go to the location of tomcat 
  - C:\Program Files\Apache Software Foundation\Tomcat 11.0\conf\tomcat-users 
  - open this "tomcat-users" file in (VSCODE OR NOTPAD), then
  - make some changes in this line
  <user username="admin" password="admin" roles="manager-gui,manager-script,admin" />

> Forth Job > Second Job : ok
  - Build steps : > target : war  (goal)
  - Post build actions : Deploy war/ear to a container
  - WAR/EAR files : **/*.warr   (instead of name add extention only) 
  - Context Path : samplewebapp    (end-product name), Ex: samplewebapp.war (this is fully of name war file)
  - Containers : Tomcat 8.x Remote   (means, allows us to enter details, like tomcat machine IP,username,passwd)
    - Tomcat url : http://localhost:8080/   # tomcat server url
    - Credentials : username : admin  + password : admin + id : tomcat-cred
    - ok
  - apply + save


# After adding all Job to each other
> we neet to inter-link all these jobs 
 - make as "downstream" way means 1 job > 2 job > 3 job > 4 job

> go to "First Job" > open to configure > Post Build Action : Build Other projects
  - project to build : Second Job  (check : trigger only if build is stable)
  = aply + save

>  go to "Second Job" > open to configure > Post Build Action : Build Other projects
   - project to build : Third Job  (check : trigger only if build is stable)
  = aply + save

>  go to "Third Job" > open to configure > Post Build Action : Build Other projects
   - project to build : Fhird Job  (check : trigger only if build is stable)
  = aply + save  

> Now we have linked all these job each other from one to forth job one by one inter-linked jobs
  if one job is faild build will not create


# So if we want to whole pipeline format , we neet to configure pipeline view
> create new view: 
  name: any_name DevOpsCI-CDPipeline1
  types: Build Pipeline View  + create
  Pipeline Flow > select initial job : First Job   (strting point)
> apply + save

# for delivery pipeline
> create new view:
  name: DevOpsCICDPipeline2
  types: Delivery Pipeline   + create
  

